"
I am a visual soccer ball whose model is STBall.

I visualize the owning team.

I am also pullable.
"
Class {
	#name : 'STBallShape',
	#superclass : 'BlElement',
	#instVars : [
		'ball',
		'squareExtent'
	],
	#category : 'SoccerTheory-Rendering-Basic',
	#package : 'SoccerTheory-Rendering',
	#tag : 'Basic'
}

{ #category : 'forms' }
STBallShape class >> ballForm [
	"Answer a ball Form."

	^ Form
		  extent: 16 @ 16
		  depth: 32
		  fromArray:
			  #( 16777215 16777215 16777215 16777215 718459602 2211368654
			     3335244747 3971857853 4088508849 3819481256 2812124573
			     1200722321 16777215 16777215 16777215 16777215 16777215
			     16777215 81056980 2144457169 4040085198 4293256677 4293980400
			     4293125091 4288256409 4288848546 4290690750 4221279131
			     2911800974 361729935 16777215 16777215 16777215 97834196
			     2731659729 4293059298 4294440951 4294572537 4294046193
			     4293322470 4291611852 4288519581 4286216826 4288453788
			     4290361785 3382023573 345939614 16777215 16777215 2127614160
			     4293059298 4294638330 4294375158 4294243572 4293914607
			     4293980400 4293914607 4293322470 4292072403 4291677645
			     4292335575 4291151301 2862127256 26448787 667996368 4107128269
			     4293125091 4288716960 4288782753 4292335575 4294506744
			     4293914607 4293256677 4292664540 4292203989 4291809231
			     4290953922 4291677645 4289572269 1284411022 2228014284
			     4292993505 4286216826 4283716692 4286479998 4290098613
			     4294375158 4293717228 4293059298 4292467161 4291677645
			     4291151301 4290624957 4290230199 4291282887 3062401160
			     3385379016 4292861919 4283716692 4284374622 4285690482
			     4287335307 4293322470 4293322470 4292532954 4291940817
			     4291611852 4289243304 4286216826 4289374890 4291480266
			     4001596291 3972318404 4292006610 4282532418 4283058762
			     4283387727 4285624689 4292598747 4292730333 4291940817
			     4291677645 4288980132 4282664004 4281742902 4284966759
			     4290756543 4051533181 4005543871 4293388263 4284440415
			     4281808695 4284506208 4291875024 4292993505 4292072403
			     4291546059 4288980132 4282335039 4281479730 4281742902
			     4282071867 4289572269 4051204216 3535452858 4293783021
			     4292532954 4287730065 4292006610 4293388263 4292598747
			     4291940817 4291546059 4287927444 4281677109 4281611316
			     4281742902 4282335039 4290098613 4050941044 2494936501
			     4292664540 4294046193 4293454056 4293256677 4292927712
			     4292335575 4291677645 4291019715 4289769648 4282466625
			     4281677109 4281677109 4284506208 4290690750 3278860143
			     934326448 4255886251 4294046193 4292861919 4292927712
			     4292664540 4292006610 4291348680 4290624957 4289835441
			     4284177243 4282269246 4283387727 4288848546 4288322202
			     1533766507 16777215 2628101541 4291546059 4293519849
			     4292269782 4292467161 4291875024 4291019715 4290295992
			     4289506476 4288914339 4288585374 4290361785 4289967027
			     3312085610 140928614 16777215 312516768 3314914709 4290361785
			     4287861651 4286743170 4288782753 4290559164 4290230199
			     4289703855 4290032820 4291151301 4290032820 3748227433
			     677799526 16777215 16777215 16777215 444036983 3111153776
			     4287335307 4288453788 4287335307 4287927444 4291809231
			     4292006610 4291217094 4288585374 3261688169 711288165
			     16777215 16777215 16777215 16777215 16777215 16777215 1583769190
			     3261030239 4032453210 4099496281 4034098035 4000346224
			     3245108332 1651009640 124085605 16777215 16777215 16777215 )
		  offset: 0 @ 0
]

{ #category : 'instance creation' }
STBallShape class >> newWithBall: aBall [
	"Initialize with a STBall"

	^ self new initializeWithBall: aBall 
]

{ #category : 'accessing' }
STBallShape >> centerPosition [
	"Answer the very center Point of the shape."

	"This doesn't always work: self position: aPosition - (self extent / 2). 
	Sometimes self extent returns here 0@0 instead of 18@18.
	For this reason, the variable squareExtent is introduced."

	^ self position + (squareExtent / 2)
]

{ #category : 'accessing' }
STBallShape >> centerPosition: aPosition [
	"Set the device origin top left based on the center position."

	"This doesn't always work: self position: aPosition - (self extent / 2). 
	Sometimes self extent returns here 0@0 instead of 18@18.
	For this reason, the variable squareExtent is introduced."

	self position: aPosition - (squareExtent / 2)
]

{ #category : 'initialization' }
STBallShape >> initializeWithBall: aBall [
	"Initialize the shape instance for a given STBall."

	| ballIcon ballIconElement |
	ball := aBall.
	squareExtent := 10 @ 10.
	self size: squareExtent.
	ball owningTeam ifNotNil: [ :team |
		self background: (Color colorFrom: team color1) ].
	ballIcon := self class ballForm.
	ballIcon := ballIcon magnifyBy: 0.5.
	ballIconElement := ballIcon asElement.
	ballIconElement position: (Point x: 1 y: 1).
	self addChild: ballIconElement.
	self addEventHandler: BlPullHandler new
]
